import React, { useState } from 'react';
import { MapPin, Clock, Navigation, Utensils, Coffee, Camera, Music, ShoppingBag, Moon } from 'lucide-react';

const BangkokItinerary = () => {
  const [activeDay, setActiveDay] = useState('11/29');
  
  // æ¨¡æ“¬é»æ“ŠéŸ³æ•ˆ
  const playSound = () => {
    try {
      const AudioContext = window.AudioContext || window.webkitAudioContext;
      if (AudioContext) {
        const audioCtx = new AudioContext();
        const oscillator = audioCtx.createOscillator();
        const gainNode = audioCtx.createGain();
        
        oscillator.type = 'triangle'; // æ”¹ç”¨ triangle æ³¢å½¢ï¼Œè²éŸ³æ›´åƒå‚³çµ±æ¨‚å™¨ä¸€é»
        oscillator.frequency.setValueAtTime(600, audioCtx.currentTime);
        oscillator.frequency.exponentialRampToValueAtTime(100, audioCtx.currentTime + 0.15);
        
        gainNode.gain.setValueAtTime(0.1, audioCtx.currentTime);
        gainNode.gain.exponentialRampToValueAtTime(0.01, audioCtx.currentTime + 0.15);
        
        oscillator.connect(gainNode);
        gainNode.connect(audioCtx.destination);
        
        oscillator.start();
        oscillator.stop(audioCtx.currentTime + 0.15);
      }
    } catch (e) {
      console.error("Audio not supported");
    }
  };

  const handleTabChange = (day) => {
    playSound();
    setActiveDay(day);
    window.scrollTo({ top: 0, behavior: 'smooth' });
  };

  const itineraryData = {
    '11/29': [
      {
        time: "09:00 - 09:30",
        title: "å´–å·®è’™ç©ºå¯º Wat Yai Chai Mongkhon",
        type: "culture",
        icon: <Camera size={20} />,
        location: "Wat Yai Chai Mongkhon Ayutthaya",
        desc: "å¤§åŸåºœæœ€å¤è€çš„å¯ºå»Ÿä¹‹ä¸€ï¼Œå¿…çœ‹å·¨å¤§è‡¥ä½›ã€‚"
      },
      {
        time: "09:45 - 10:30",
        title: "ç‘ªå“ˆæ³°å¯º Wat Mahathat",
        type: "culture",
        icon: <Camera size={20} />,
        location: "Wat Mahathat Ayutthaya",
        desc: "è‘—åçš„ã€Œæ¨¹ä¸­ä½›é ­ã€æ‰€åœ¨åœ°ã€‚"
      },
      {
        time: "10:40 - 11:45",
        title: "å·´èŠèˆ¹é¢ Palek Boat Noodles",
        type: "food",
        icon: <Utensils size={20} />,
        location: "Pa Lek Boat Noodle Ayutthaya",
        desc: "à¸à¹‹à¸§à¸¢à¹€à¸•à¸µà¹‹à¸¢à¸§à¹€à¸£à¸·à¸­à¸›à¹‰à¸²à¹€à¸¥à¹‡à¸à¹€à¸ˆà¹‰à¸²à¹€à¸à¹ˆà¸² - ç•¶åœ°è€å­—è™Ÿèˆ¹éºµã€‚"
      },
      {
        time: "12:30 - 13:00",
        title: "SYAMA Cafe",
        type: "cafe",
        icon: <Coffee size={20} />,
        location: "SYAMA AYUDHYA",
        desc: "æ²³ç•”æ™¯è§€å’–å•¡å»³ï¼Œé©åˆä¼‘æ¯æ‹ç…§ã€‚"
      },
      {
        time: "13:30 - 14:30",
        title: "Kung Phuean Praew",
        type: "food",
        icon: <Utensils size={20} />,
        location: "Kung Phuean Praew Ayutthaya",
        desc: "äº«å—å¤§åŸè‘—åçš„çƒ¤è¦æ–™ç†ã€‚"
      },
      {
        time: "15:00 - 17:00",
        title: "æŸ´ç“¦å¡”é‚£è˜­å¯º Wat Chaiwatthanaram",
        type: "culture",
        icon: <Camera size={20} />,
        location: "Wat Chaiwatthanaram Ayutthaya",
        desc: "ğŸ”¥ Dress Code: æ³°æœé«”é©—ã€‚å¤•é™½æœ€ç¾ï¼Œé…·ä¼¼å³å“¥çªŸã€‚"
      },
      {
        time: "17:00",
        title: "Back to Bangkok",
        type: "travel",
        icon: <Navigation size={20} />,
        location: "Bangkok",
        desc: "è¿”å›æ›¼è°·å¸‚å€ã€‚"
      },
      {
        time: "19:30 - 20:30",
        title: "Asiatique æ‘©å¤©è¼ªå¤œå¸‚",
        type: "nightlife",
        icon: <ShoppingBag size={20} />,
        location: "Asiatique The Riverfront",
        desc: "é€›è¡—ã€æ‘©å¤©è¼ªã€‚æ¨è–¦ï¼šEN Gelato å†°æ·‡æ·‹ã€‚"
      },
      {
        time: "21:00 - 22:00",
        title: "Calypso Cabaret (å·²è¨‚)",
        type: "show",
        icon: <Music size={20} />,
        location: "Calypso Cabaret Asiatique",
        desc: "åŒ…å«é£²æ–™ã€‚ç¶“å…¸äººå¦–ç§€è¡¨æ¼”ã€‚"
      },
      {
        time: "23:00",
        title: "Le Du Kaan é«˜ç©ºé…’å§ (å·²è¨‚)",
        type: "nightlife",
        icon: <Moon size={20} />,
        location: "Le Du Kaan Bangkok",
        desc: "äº«å—æ›¼è°·å¤œæ™¯ï¼ŒçµæŸç¾å¥½çš„ä¸€å¤©ã€‚"
      }
    ],
    '11/30': [
      {
        time: "08:00 - 09:00",
        title: "é‚¢æ³°è®° Kopi Hya Tai Ke",
        type: "food",
        icon: <Coffee size={20} />,
        location: "Kopi Hya Tai Ke Sao Chingcha",
        desc: "à¹‚à¸à¸›à¸µà¹Šà¹€à¸®à¸µà¹‰à¸¢à¸°à¹„à¸–à¹ˆà¸à¸µà¹ˆ - å‚³çµ±æ³°å¼æ—©é¤ï¼Œé–‹å•Ÿè€åŸå€ä¹‹æ—…ã€‚"
      },
      {
        time: "09:20 - 12:00",
        title: "ä¸­åœ‹åŸ / Song Wat Rd æ¢ç´¢",
        type: "walk",
        icon: <MapPin size={20} />,
        location: "Song Wat Road Bangkok",
        desc: "æ–‡é’æ•£ç­–è·¯ç·š",
        subList: [
          "Yaowarat Gate",
          "Wanjai Cafe House",
          "Beans Coffee (å¯å¤–å¸¶)",
          "Gu Long Bao (å¤é¾åŒ…: å’–å•¡+åŒ…å­)",
          "Tay Cafe (äººæ°£åº—)",
          "Play Art House (å°è—å»Š)",
          "Double Goose å£ç•« (å¿…æ‹)",
          "I Scream å†°æ·‡æ·‹",
          "Saan Song Wat (æ–°é–‹æ–‡é’åº—)",
          "Onest at SongWat (æœ¨è³ªç¾åº—)",
          "pink rabbit + Bob (å¾ˆç´…çš„è›‹ç³•åº—)",
          "FV local Thai dessert (æ³°å¼ç”œé»)",
          "Copenn (é¦™æ°›)",
          "Song Wat Coffee Roaster (çƒ˜è±†åº—)",
          "Urai Han Palo Braised Goose (ç±³å…¶æ—æ»·éµ)",
          "Weekend Market (æ²³é‚Šå¸‚é›†)",
          "Pak Khlong Talad èŠ±å¸‚ (çµ‚é»)",
          "KHIRI Thai tea (èŠ±å¸‚é™„è¿‘)"
        ]
      },
      {
        time: "12:30 - 13:00",
        title: "åˆé¤: Nai Mong Hoi Tod",
        type: "food",
        icon: <Utensils size={20} />,
        location: "Nai Mong Hoi Tod Bangkok",
        desc: "ç±³å…¶æ—æ¨è–¦èšµä»”ç…ï¼Œé…¥è„†å£æ„Ÿã€‚"
      },
      {
        time: "14:00 - 14:30",
        title: "Ann Guay Tiew Kua Gai",
        type: "food",
        icon: <Utensils size={20} />,
        location: "Ann Guay Tiew Kua Gai Bangkok",
        desc: "ç±³å…¶æ—æ¨è–¦ç²¿æ¢è€åº— (é›è‚‰ç‚’æ²³ç²‰)ã€‚"
      },
      {
        time: "15:00 - 17:00",
        title: "Central World å•†åœˆ",
        type: "shopping",
        icon: <ShoppingBag size={20} />,
        location: "Central World Bangkok",
        desc: "é€›è¡—è¡Œç¨‹ã€‚é‡é»ï¼šUno cafe, Mith é¦™æ°´ã€‚"
      },
      {
        time: "17:30 - 20:00",
        title: "Central Park / KAEW BOUTIQUE",
        type: "relax",
        icon: <Coffee size={20} />,
        location: "Kaew Boutique Bangkok",
        desc: "é¦™è˜­è‘‰ç”œé»å°ˆè³£åº—ï¼Œäº«å—å‚æ™šæ™‚å…‰ã€‚"
      },
      {
        time: "20:30 - 21:30",
        title: "æ™šé¤: CHONTHONG Kaprow",
        type: "food",
        icon: <Utensils size={20} />,
        location: "Chonthong Kaprow Silom",
        desc: "à¸Šà¹‰à¸­à¸™à¸—à¸­à¸‡ à¸•à¹‰à¸™à¸•à¸³à¸£à¸±à¸šà¸à¸°à¹€à¸à¸£à¸²à¹„à¸—à¸¢ (Silomåˆ†åº—) - æ­£å®—æ³°å¼æ‰“æ‹‹è±¬ã€‚"
      }
    ]
  };

  const getTypeColor = (type) => {
    switch (type) {
      case 'food': return 'bg-orange-100 text-orange-700 border-orange-200';
      case 'culture': return 'bg-amber-100 text-amber-700 border-amber-200';
      case 'cafe': return 'bg-yellow-50 text-yellow-800 border-yellow-200';
      case 'nightlife': return 'bg-purple-100 text-purple-800 border-purple-200';
      case 'shopping': return 'bg-pink-50 text-pink-700 border-pink-200';
      default: return 'bg-teal-50 text-teal-800 border-teal-200';
    }
  };

  // ç”¢ç”Ÿ Google Maps é€£çµ
  const getMapLink = (location) => {
    return `https://www.google.com/maps/search/?api=1&query=${encodeURIComponent(location)}`;
  };

  return (
    // ä¿®æ”¹èƒŒæ™¯ç‚ºæ›´æš–çš„æ³°å¼é‡‘é»ƒ/çµ²ç¶¢è‰²èª¿
    <div className="min-h-screen bg-gradient-to-b from-amber-50 via-orange-50 to-amber-100 pb-20 font-serif selection:bg-amber-200">
      
      {/* Header Image Section */}
      <div className="relative w-full h-72 md:h-96 overflow-hidden shadow-2xl bg-gray-900 border-b-4 border-amber-400">
        <div className="absolute inset-0 flex items-center justify-center">
          <img 
            src="image.png" 
            alt="Bangkok Trip DM" 
            className="w-full h-full object-contain opacity-95 hover:scale-105 transition-transform duration-700"
            onError={(e) => {
                e.target.onerror = null; 
                e.target.src = "https://images.unsplash.com/photo-1563492065599-3520f775eeed?q=80&w=1000&auto=format&fit=crop";
            }}
          />
          {/* åŠ å…¥ä¸€äº›æ³°å¼ç´‹ç†çš„ç–ŠåŠ æ•ˆæœï¼ˆæ¨¡æ“¬ï¼‰ */}
          <div className="absolute inset-0 bg-gradient-to-t from-black/90 via-black/20 to-transparent"></div>
        </div>
        
        <div className="absolute bottom-8 left-0 right-0 text-center px-4">
          <h1 className="text-3xl md:text-5xl font-serif font-bold leading-tight drop-shadow-lg text-amber-100 tracking-wider">
            <span className="block text-sm md:text-base text-amber-300 uppercase tracking-[0.3em] mb-2 font-sans">Amazing Thailand</span>
            Bangkok Trip
            <span className="block text-xl md:text-3xl mt-2 text-amber-400">November 2025</span>
          </h1>
        </div>
      </div>

      {/* Navigation Tabs - å¢åŠ æ³°å¼è£é£¾é¢¨æ ¼ */}
      <div className="sticky top-0 z-50 bg-amber-50/95 backdrop-blur-md shadow-md border-b border-amber-200">
        <div className="flex justify-center p-3 gap-6 max-w-md mx-auto">
          {['11/29', '11/30'].map((day) => (
            <button
              key={day}
              onClick={() => handleTabChange(day)}
              className={`flex-1 py-2 px-4 rounded-full font-serif font-bold text-lg transition-all duration-300 border-2 ${
                activeDay === day 
                  ? 'bg-purple-900 border-amber-400 text-amber-100 shadow-lg shadow-purple-900/40 transform scale-105' 
                  : 'bg-white border-amber-100 text-amber-800 hover:bg-amber-100 hover:border-amber-300'
              }`}
            >
              {day}
            </button>
          ))}
        </div>
      </div>

      {/* Itinerary List */}
      <div className="max-w-2xl mx-auto px-4 mt-8 space-y-8">
        {itineraryData[activeDay].map((item, index) => (
          <div 
            key={index}
            className="group relative bg-white/90 backdrop-blur-sm rounded-xl p-6 shadow-md border-l-4 border-l-amber-500 border-y border-r border-amber-100 hover:shadow-2xl hover:border-l-purple-600 transition-all duration-300 transform hover:-translate-y-1"
          >
            {/* Time Badge - æ³°å¼ç´«è‰² */}
            <div className="absolute -top-3 left-6">
              <span className="bg-purple-900 text-amber-100 text-xs font-sans font-bold px-4 py-1.5 rounded-full shadow-md flex items-center gap-1 border border-amber-500">
                <Clock size={12} className="text-amber-400" />
                {item.time}
              </span>
            </div>

            <div className="flex gap-4 pt-3">
              {/* Type Icon - åœ“å½¢æ”¹ç‚ºç¨å¾®åœ“è§’çš„æ–¹å½¢ï¼Œæ›´æœ‰å»ºç¯‰æ„Ÿ */}
              <div className={`flex-shrink-0 w-14 h-14 rounded-xl flex items-center justify-center shadow-inner ${getTypeColor(item.type)}`}>
                {item.icon}
              </div>

              {/* Content */}
              <div className="flex-1">
                <h3 className="font-serif font-bold text-xl text-gray-800 leading-tight mb-2 tracking-wide text-purple-950">{item.title}</h3>
                
                {/* Description */}
                {item.desc && (
                  <p className="text-sm font-sans text-gray-600 mb-4 leading-relaxed">{item.desc}</p>
                )}

                {/* Special Sub-list for Song Wat Rd */}
                {item.subList && (
                  <div className="bg-amber-50/50 rounded-lg p-4 mb-4 border border-amber-200 max-h-64 overflow-y-auto custom-scrollbar">
                    <p className="text-xs font-bold text-amber-800 mb-3 uppercase tracking-widest border-b border-amber-200 pb-1">Hidden Gems</p>
                    <ul className="space-y-3">
                      {item.subList.map((sub, i) => (
                        <li key={i} className="flex items-start gap-3 text-sm text-gray-700 font-sans">
                          <span className="text-purple-600 mt-1">âœ¦</span>
                          {sub}
                        </li>
                      ))}
                    </ul>
                  </div>
                )}
              </div>
            </div>

            {/* Action Buttons - ä½¿ç”¨ <a> æ¨™ç±¤ä¿®å¾©å°èˆª */}
            <div className="mt-2 pt-4 border-t border-dashed border-amber-200 flex justify-end">
              <a
                href={getMapLink(item.location)}
                target="_blank"
                rel="noopener noreferrer"
                onClick={playSound}
                className="flex items-center gap-2 bg-amber-100 hover:bg-amber-200 text-amber-900 px-5 py-2.5 rounded-lg text-sm font-bold transition-colors active:scale-95 no-underline shadow-sm border border-amber-200"
              >
                <Navigation size={16} className="text-purple-700" />
                <span className="font-sans">å°èˆª</span>
              </a>
            </div>
          </div>
        ))}
        
        {/* End of list marker */}
        <div className="text-center py-10 opacity-60">
          <div className="flex items-center justify-center gap-2 mb-2">
             <span className="h-px w-12 bg-amber-300"></span>
             <span className="text-amber-500 text-xl">âœ¤</span>
             <span className="h-px w-12 bg-amber-300"></span>
          </div>
          <p className="text-xs font-serif text-amber-800 tracking-widest">End of {activeDay}</p>
        </div>
      </div>
    </div>
  );
};

export default BangkokItinerary;



